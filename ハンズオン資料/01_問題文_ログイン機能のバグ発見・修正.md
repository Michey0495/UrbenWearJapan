# ログイン機能のバグ発見・修正ハンズオン

## 概要
UrbanWear Japanのログイン機能において、様々なバグや問題が意図的に仕込まれています。
テストエンジニアとして、これらの問題を発見し、修正してください。

## 対象ページ
- `login.html` - ログインページ
- `forgot-password.html` - パスワードリセットページ

## タスク1: ログインページ (`login.html`) のバグ発見・修正

### 1.1 HTML/CSSの問題
以下の問題を発見し、修正してください：

#### 問題1: フォームのaction属性
- **場所**: ログインフォーム
- **問題**: `action="javascript:void(0)"` が設定されている
- **影響**: フォーム送信時に適切な処理が実行されない
- **修正方法**: 適切なaction属性を設定するか、JavaScriptで処理する

#### 問題2: 必須属性の欠如
- **場所**: メールアドレス入力フィールド
- **問題**: `required` 属性が設定されていない
- **影響**: 空の状態でフォーム送信が可能
- **修正方法**: `required` 属性を追加する

#### 問題3: エラーメッセージの表示
- **場所**: メールアドレス入力フィールド下
- **問題**: エラーメッセージが常に表示されている
- **影響**: ユーザーエクスペリエンスの悪化
- **修正方法**: 初期状態では非表示にし、エラー時のみ表示する

#### 問題4: パスワードの最小長
- **場所**: パスワード入力フィールド
- **問題**: `minlength="3"` が設定されている（短すぎる）
- **影響**: セキュリティの低下
- **修正方法**: 適切な最小長（8文字以上）に設定する

#### 問題5: チェックボックスのname属性
- **場所**: 「ログイン状態を保持」チェックボックス
- **問題**: `name="remember_me"` が設定されている
- **影響**: フォーム送信時に適切に値が送信されない可能性
- **修正方法**: 適切なname属性を設定する

#### 問題6: ボタンのtype属性
- **場所**: ログインボタン
- **問題**: `type` 属性が設定されていない
- **影響**: ボタンの動作が予期しないものになる可能性
- **修正方法**: `type="submit"` を設定する

#### 問題7: テスト用ログイン情報の表示
- **場所**: ページ下部
- **問題**: テスト用のログイン情報が表示されている
- **影響**: セキュリティ上の問題
- **修正方法**: 本番環境では非表示にする

### 1.2 JavaScriptの問題
以下の問題を発見し、修正してください：

#### 問題8: イベントリスナーの重複
- **場所**: フォーム送信イベント
- **問題**: 同じイベントリスナーが2回登録されている
- **影響**: 処理が重複実行される
- **修正方法**: 重複を削除する

#### 問題9: バリデーションの不完全性
- **場所**: フォーム送信処理
- **問題**: 基本的なチェックのみで、詳細なバリデーションが不足
- **影響**: 不正なデータの送信が可能
- **修正方法**: 適切なバリデーションを実装する

#### 問題10: パスワードの検証
- **場所**: パスワードチェック処理
- **問題**: 3文字以上という弱い検証
- **影響**: セキュリティの低下
- **修正方法**: より強固なパスワード検証を実装する

#### 問題11: ログイン処理の不完全性
- **場所**: ログイン成功後の処理
- **問題**: 実際のAPI呼び出しがない
- **影響**: ログイン機能が動作しない
- **修正方法**: 適切なログイン処理を実装する

#### 問題12: セキュリティ上の問題
- **場所**: パスワード処理
- **問題**: パスワードがコンソールに出力される
- **影響**: セキュリティの重大な問題
- **修正方法**: パスワードのログ出力を削除する

#### 問題13: リダイレクト処理
- **場所**: ログイン成功後の処理
- **問題**: リダイレクト処理がコメントアウトされている
- **影響**: ログイン後も同じページに留まる
- **修正方法**: 適切なリダイレクト処理を実装する

#### 問題14: パスワード強度チェック
- **場所**: パスワード入力時の処理
- **問題**: 実装が不完全
- **影響**: ユーザーに適切なフィードバックが提供されない
- **修正方法**: 完全なパスワード強度チェックを実装する

#### 問題15: グローバル変数の漏洩
- **場所**: スクリプト全体
- **問題**: `var` を使用したグローバル変数の定義
- **影響**: 名前空間の汚染
- **修正方法**: `const` や `let` を使用する

#### 問題16: 未定義関数の呼び出し
- **場所**: `testFunction()` 内
- **問題**: 定義されていない関数を呼び出そうとしている
- **影響**: JavaScriptエラーの発生
- **修正方法**: 適切な関数定義または呼び出しの修正

## タスク2: パスワードリセットページ (`forgot-password.html`) のバグ発見・修正

### 2.1 HTMLの問題
以下の問題を発見し、修正してください：

#### 問題17: IDの重複
- **場所**: フォームとメール入力フィールド
- **問題**: 同じIDが複数の要素で使用されている
- **影響**: JavaScriptでの要素取得が正しく動作しない
- **修正方法**: 一意のIDを設定する

#### 問題18: エラーメッセージの表示制御
- **場所**: メールアドレス入力フィールド下
- **問題**: エラーメッセージが初期状態で表示されている
- **影響**: ユーザーエクスペリエンスの悪化
- **修正方法**: 初期状態では非表示にする

#### 問題19: ラジオボタンのname属性
- **場所**: 確認方法の選択
- **問題**: `reset_method` と `reset_method_sms` で異なるname属性
- **影響**: ラジオボタンが正しく動作しない
- **修正方法**: 統一されたname属性を設定する

#### 問題20: ボタンのtype属性
- **場所**: リセットボタン
- **問題**: `type` 属性が設定されていない
- **影響**: ボタンの動作が予期しないものになる
- **修正方法**: `type="submit"` を設定する

#### 問題21: テスト用情報の表示
- **場所**: ページ下部
- **問題**: テスト用のメールアドレスと確認コードが表示されている
- **影響**: セキュリティ上の問題
- **修正方法**: 本番環境では非表示にする

### 2.2 JavaScriptの問題
以下の問題を発見し、修正してください：

#### 問題22: 変数名の不適切性
- **場所**: 変数定義
- **問題**: 汎用的すぎる変数名（`form`, `emailInput` など）
- **影響**: コードの可読性と保守性の低下
- **修正方法**: より具体的で意味のある変数名を使用する

#### 問題23: イベントリスナーの設定
- **場所**: フォーム送信イベント
- **問題**: 条件分岐のみで、エラーハンドリングが不完全
- **影響**: 予期しない動作の可能性
- **修正方法**: 適切なエラーハンドリングを実装する

#### 問題24: 関数名の不適切性
- **場所**: 関数定義
- **問題**: 汎用的すぎる関数名（`handleReset`）
- **影響**: コードの可読性の低下
- **修正方法**: より具体的で意味のある関数名を使用する

#### 問題25: バリデーションの不完全性
- **場所**: フォーム送信処理
- **問題**: 基本的なチェックのみ
- **影響**: 不正なデータの送信が可能
- **修正方法**: 適切なバリデーションを実装する

#### 問題26: メールアドレスの形式チェック
- **場所**: メールアドレス検証
- **問題**: `@` の存在のみをチェック
- **影響**: 不完全なメールアドレス形式チェック
- **修正方法**: 正規表現を使用した適切な形式チェックを実装する

#### 問題27: 確認方法の選択チェック
- **場所**: ラジオボタン選択チェック
- **問題**: 両方のname属性をチェックする複雑な処理
- **影響**: コードの可読性と保守性の低下
- **修正方法**: 統一されたname属性を使用する

#### 問題28: ボタンの状態管理
- **場所**: 送信処理中
- **問題**: ボタンの状態変更が不完全
- **影響**: ユーザーエクスペリエンスの悪化
- **修正方法**: 適切な状態管理を実装する

#### 問題29: タイマー処理
- **場所**: 送信完了後の処理
- **問題**: 2秒固定のタイマー
- **影響**: 実際の処理時間と合わない
- **修正方法**: 適切なタイマー処理を実装する

#### 問題30: フォームリセット
- **場所**: 送信完了後
- **問題**: フォームリセット処理がコメントアウトされている
- **影響**: フォームが初期状態に戻らない
- **修正方法**: フォームリセット処理を実装する

#### 問題31: 未使用関数
- **場所**: スクリプト全体
- **問題**: 使用されていない関数が残っている
- **影響**: コードの可読性と保守性の低下
- **修正方法**: 未使用関数を削除する

#### 問題32: グローバル変数の汚染
- **場所**: スクリプト全体
- **問題**: `window.globalVar` の設定
- **影響**: 名前空間の汚染
- **修正方法**: グローバル変数の使用を避ける

#### 問題33: エラーハンドリング
- **場所**: try-catch文
- **問題**: 基本的なログのみで、詳細な情報が不足
- **影響**: デバッグの困難さ
- **修正方法**: 適切なエラーハンドリングを実装する

## タスク3: 生成AIを活用したバグ発見・修正

### 3.1 生成AIを使ったバグ発見の方法
以下の手順で生成AIを活用してバグを発見してください：

1. **コードの説明**: 生成AIにコードの目的と期待される動作を説明する
2. **問題の特定**: 生成AIに潜在的な問題を指摘してもらう
3. **修正案の提案**: 生成AIに修正方法を提案してもらう
4. **実装の確認**: 生成AIに修正後のコードを確認してもらう

### 3.2 生成AIへの質問例
- 「このログインフォームのコードに問題はありますか？」
- 「セキュリティ上の問題を指摘してください」
- 「このJavaScriptコードの改善点を教えてください」
- 「HTMLのバリデーションを強化する方法を教えてください」

## 評価基準
- **バグ発見数**: 33個中何個発見できたか
- **修正の正確性**: 修正内容が適切か
- **生成AIの活用**: 効果的に生成AIを活用できたか
- **報告書の品質**: 発見した問題と修正内容の報告が適切か

## 提出物
1. **バグ発見・修正レポート**: 発見した問題と修正内容の詳細
2. **修正後のコード**: 修正が完了したHTMLファイル
3. **生成AI活用レポート**: 生成AIをどのように活用したかの詳細

## 制限時間
- **推奨時間**: 2-3時間
- **最大時間**: 4時間

## 注意事項
- 修正は段階的に行い、各段階で動作確認を行う
- 生成AIの提案は必ず検証してから適用する
- セキュリティ上の問題は特に注意深く確認する
- 修正内容は必ず記録に残す
